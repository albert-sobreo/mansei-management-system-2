{% extends 'base-template.html' %}
{% block title %} EMS | Edit Payroll {% endblock %}

{% block body %}

<div id="app" v-cloak>
    <!-- NAV BAR -->
    <navbar-ems active="nav-payroll" photo="/static/media/{{request.user.image}}"></navbar-ems>
    <app-card></app-card>
    <profile-card first_name="{{request.user.first_name}}" last_name="{{request.user.last_name}}" position="{{request.user.position}}" auth_level="{{request.user.authLevel}}" photo="/media/{{request.user.image}}/"></profile-card>

    <!-- MAIN BODY -->
    <div class="container">
        <!-- TITLE -->
        <div class="d-flex align-items-center mb-3">
            <span class="font-size-18 font-bold mr-1">Edit Payroll</span>
        </div>

        <!-- BODY -->
        <div class="d-flex flex-row justify-content-center my-2">
            <div class="w-75">

                <!-- PAYROLL INFO -->
                <div class="px-4 border mb-2 box-shadow-medium">
                    <div class="row py-2">
                        <div class="col">
                            <span class="gray font-size-14 font-bold">Payroll Info</span>
                        </div>
                    </div>
                    <div class="row py-2">
                        <div class="col-6">
                            <label for="" class="gray">Employee</label><br>
                            <span class="font-bold">[[payroll.user.first_name]] [[payroll.user.last_name]]</span>
                        </div>
                        <div class="col-6">
                            <label for="" class="gray">Year</label><br>
                            <span class="font-bold">[[payroll.year]]</span>
                        </div>
                        <div class="col-6 mt-2">
                            <label for="" class="gray">Period</label><br>
                            <span class="font-bold">[[formatDate(payroll.dateStart)]] - [[formatDate(payroll.dateEnd)]]</span>
                        </div>
                        <div class="col-6 mt-2">
                            <label for="" class="gray">Date Generated</label><br>
                            <span class="font-bold">[[formatDate(payroll.dateGenerated)]]</span>
                        </div>
                    </div>
                </div>

                <!-- TOTAL PAY -->
                <div class="px-4 border mb-2 box-shadow-medium">
                    <div class="row py-2">
                        <div class="col">
                            <span class="gray font-size-14 font-bold">Total Pay</span>
                        </div>
                    </div>
                    <div class="row py-2">
                        <!-- LINE ONE -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Basic Hours Pay" for="" class="timesheet-hours">BH</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.bh)" @change="updateBH" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Overtime Pay" for="" class="timesheet-hours">OT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.ot)" @change="updateOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Night Differential Pay" for="" class="timesheet-hours">ND</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.nd)" @change="updateND" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Night Differential Overtime Pay" for="" class="timesheet-hours">NDOT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.ndot)" @change="updateNDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        

                        <!-- LINE TWO -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Rest Day Pay" for="" class="timesheet-hours">RD</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rd)" @change="updateRD" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Rest Day Overtime Pay" for="" class="timesheet-hours">RD OT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rdot)" @change="updateRDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Rest Day Night Differential Pay" for="" class="timesheet-hours">RD ND</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rdnd)" @change="updateRDND" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Rest Day Night Differential Overtime Pay" for="" class="timesheet-hours">RD NDOT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rdndot)" @change="updateRDNDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE THREE -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Pay" for="" class="timesheet-hours">RH</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rh)" @change="updateRH" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Overtime Pay" for="" class="timesheet-hours">RH OT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhot)" @change="updateRHOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Night Differential Pay" for="" class="timesheet-hours">RH ND</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhnd)" @change="updateRHND" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Night Differential Overtime Pay" for="" class="timesheet-hours">RH NDOT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhndot)" @change="updateRHNDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE FOUR -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Pay" for="" class="timesheet-hours">SH</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.sh)" @change="updateSH" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Overtime Pay" for="" class="timesheet-hours">SHOT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shot)" @change="updateSHOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Night Differential Pay" for="" class="timesheet-hours">SHND</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shnd)" @change="updateSHND" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Night Differential Overtime Pay" for="" class="timesheet-hours">SH NDOT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shndot)" @change="updateSHNDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE FIVE -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Working Holiday Pay" for="" class="timesheet-hours">SHW</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shw)" @change="updateSHW" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Working Holiday Overtime Pay" for="" class="timesheet-hours">SHW OT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shwot)" @change="updateSHWOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Working Holiday Night Differential Pay" for="" class="timesheet-hours">SHW ND</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shwnd)" @change="updateSHWND" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Night Differential Overtime Pay" for="" class="timesheet-hours">SHW NDOT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shwndot)" @change="updateSHWNDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE SIX -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Rest Day Pay" for="" class="timesheet-hours">RHRD</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhrd)" @change="updateRHRD" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Rest Day Overtime Pay" for="" class="timesheet-hours">RHRD OT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhrdot)" @change="updateRHRDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Rest Day Night Differential Pay" for="" class="timesheet-hours">RHRD ND</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhrdnd)" @change="updateRHRDND" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Rest Day Night Differential Overtime Pay" for="" class="timesheet-hours">RHRD NDOT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhrdndot)" @change="updateRHRDNDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE SEVEN -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Rest Day Pay" for="" class="timesheet-hours">SHRD</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shrd)" @change="updateSHRD" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Rest Day Overtime Pay" for="" class="timesheet-hours">SHRD OT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shrdot)" @change="updateSHRDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Rest Day Night Differential Pay" for="" class="timesheet-hours">SHRD ND</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shrdnd)" @change="updateSHRDND" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Rest Day Night Differential Overtime Pay" for="" class="timesheet-hours">SHRD NDOT</label><br>
                            <div class="placeholder" data-placeholder="₱">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shrdndot)" @change="updateSHRDNDOT" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- TOTAL HOURS -->
                <div class="px-4 border mb-2 box-shadow-medium">
                    <div class="row py-2">
                        <div class="col">
                            <span class="gray font-size-14 font-bold">Total Hours</span>
                        </div>
                    </div>
                    <div class="row py-2">
                        <!-- LINE ONE -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Basic Hours Pay" for="" class=" timesheet-hours">BH</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.bhTotalHours)" @change="updateBHHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Overtime Pay" for="" class=" timesheet-hours">OT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.otTotalHours)" @change="updateOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Night Differential Pay" for="" class=" timesheet-hours">ND</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.ndTotalHours)" @change="updateNDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Night Differential Overtime Pay" for="" class=" timesheet-hours">NDOT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.ndotTotalHours)" @change="updateNDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        

                        <!-- LINE TWO -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Rest Day Pay" for="" class=" timesheet-hours">RD</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rdTotalHours)" @change="updateRDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Rest Day Overtime Pay" for="" class=" timesheet-hours">RD OT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rdotTotalHours)" @change="updateRDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Rest Day Night Differential Pay" for="" class=" timesheet-hours">RD ND</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rdndTotalHours)" @change="updateRDNDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Rest Day Night Differential Overtime Pay" for="" class=" timesheet-hours">RD NDOT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rdndotTotalHours)" @change="updateRDNDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE THREE -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Pay" for="" class=" timesheet-hours">RH</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhTotalHours)" @change="updateRHHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Overtime Pay" for="" class=" timesheet-hours">RH OT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhotTotalHours)" @change="updateRHOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Night Differential Pay" for="" class=" timesheet-hours">RH ND</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhndTotalHours)" @change="updateRHNDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Night Differential Overtime Pay" for="" class=" timesheet-hours">RH NDOT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhndotTotalHours)" @change="updateRHNDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE FOUR -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Pay" for="" class=" timesheet-hours">SH</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shTotalHours)" @change="updateSHHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Overtime Pay" for="" class=" timesheet-hours">SHOT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shotTotalHours)" @change="updateSHOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Night Differential Pay" for="" class=" timesheet-hours">SHND</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shndTotalHours)" @change="updateSHNDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Night Differential Overtime Pay" for="" class=" timesheet-hours">SH NDOT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shndotTotalHours)" @change="updateSHNDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE FIVE -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Working Holiday Pay" for="" class=" timesheet-hours">SHW</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shwTotalHours)" @change="updateSHWHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Working Holiday Overtime Pay" for="" class=" timesheet-hours">SHW OT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shwotTotalHours)" @change="updateSHWOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Working Holiday Night Differential Pay" for="" class=" timesheet-hours">SHW ND</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shwndTotalHours)" @change="updateSHWNDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Night Differential Overtime Pay" for="" class=" timesheet-hours">SHW NDOT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shwndotTotalHours)" @change="updateSHWNDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE SIX -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Rest Day Pay" for="" class=" timesheet-hours">RHRD</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhrdTotalHours)" @change="updateRHRDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Rest Day Overtime Pay" for="" class=" timesheet-hours">RHRD OT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhrdotTotalHours)" @change="updateRHRDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Rest Day Night Differential Pay" for="" class=" timesheet-hours">RHRD ND</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhrdndTotalHours)" @change="updateRHRDNDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Regular Holiday Rest Day Night Differential Overtime Pay" for="" class=" timesheet-hours">RHRD NDOT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.rhrdndotTotalHours)" @change="updateRHRDNDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>


                        <!-- LINE SEVEN -->
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Rest Day Pay" for="" class=" timesheet-hours">SHRD</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shrdTotalHours)" @change="updateSHRDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Rest Day Overtime Pay" for="" class=" timesheet-hours">SHRD OT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shrdotTotalHours)" @change="updateSHRDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Rest Day Night Differential Pay" for="" class=" timesheet-hours">SHRD ND</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shrdndTotalHours)" @change="updateSHRDNDHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                        <div class="col-3 text-center mt-2">
                            <div class="mx-1 b-radius-5 border">
                            <label title="Special Holiday Rest Day Night Differential Overtime Pay" for="" class=" timesheet-hours">SHRD NDOT</label><br>
                            <div class="placeholder" data-placeholder="H">
                                <input onkeypress="validate()" type="text" class="form-control-special-2" :value="formatPrice(payroll.shrdndotTotalHours)" @change="updateSHRDNDOTHOURS" @focus="$event.target.select()">
                            </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SSS DEDUCTIONS -->
                <div class="px-4 border mb-2 box-shadow-medium">
                    <div class="row pt-2">
                        <div class="col">
                            <span class="gray font-size-14 font-bold">SSS Employee Deductions</span>
                        </div>
                    </div>

                    <div class="row my-2 py-2 order-card b-radius-5">
                        <div class="col-12 pb-2">
                            <label for="" class="gray" v-if="payroll.sssemployeededuction">Basis | [[payroll.sssemployeededuction.sssContributionRate.name]]</label>
                        </div>

                        <div class="col">
                            <label for="" class="gray">Lower Range</label><br>
                            <span class="font-bold" v-if="payroll.sssemployeededuction">₱[[formatPrice(payroll.sssemployeededuction.sssContributionRate.lowerLimit)]]</span>
                        </div>
                        <div class="col">
                            <label for="" class="gray">Upper Range</label><br>
                            <span class="font-bold" v-if="payroll.sssemployeededuction">₱[[formatPrice(payroll.sssemployeededuction.sssContributionRate.upperLimit)]]</span>
                        </div>
                        <div class="col">
                            <label for="" class="gray">EE</label><br>
                            <span class="font-bold" v-if="payroll.sssemployeededuction">₱[[formatPrice(payroll.sssemployeededuction.sssContributionRate.ee)]]</span>
                        </div>
                        <div class="col">
                            <label for="" class="gray">ER</label><br>
                            <span class="font-bold" v-if="payroll.sssemployeededuction">₱[[formatPrice(payroll.sssemployeededuction.sssContributionRate.er)]]</span>
                        </div>
                    </div>

                    <div class="row py-2">
                        <div class="col">
                            <div class="form-group" v-if="payroll.sssemployeededuction">
                                <label for="">Employee Contribution</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₱</span>
                                    </div>
                                    <input onkeypress="validate()" type="text" class="form-control box-shadow-off" placeholder="Enter EE Contribution" v-model="payroll.sssemployeededuction.ee">
                                </div>
                            </div>
                        </div>

                        <div class="col">
                            <div class="form-group" v-if="payroll.sssemployeededuction">
                                <label for="">Employer Contribution</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₱</span>
                                    </div>
                                    <input onkeypress="validate()" type="text" class="form-control box-shadow-off" placeholder="Enter ER Contribution" v-model="payroll.sssemployeededuction.er">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PHIC EMPLOYEE CONTRIBUTION -->
                <div class="px-4 pb-1 border mb-2 box-shadow-medium">
                    <div class="row pt-2">
                        <div class="col">
                            <span class="gray font-size-14 font-bold">PHIC Employee Deductions</span>
                        </div>
                    </div>

                    <div class="row my-2 py-2 order-card-darker b-radius-5">
                        <div class="col-12 pb-2">
                            <label for="" class="gray" v-if="payroll.phicemployeededuction">Basis | [[payroll.phicemployeededuction.name]]</label>
                        </div>

                        <div class="col">
                            <label for="" class="gray">Lower Range</label><br>
                            <span class="font-bold" v-if="payroll.phicemployeededuction">₱[[formatPrice(payroll.phicemployeededuction.phicContributionRate.lowerLimit)]]</span>
                        </div>
                        <div class="col">
                            <label for="" class="gray">Upper Range</label><br>
                            <span class="font-bold" v-if="payroll.phicemployeededuction">₱[[formatPrice(payroll.phicemployeededuction.phicContributionRate.upperLimit)]]</span>
                        </div>
                        <div class="col">
                            <label for="" class="gray">Rate</label><br>
                            <span class="font-bold" v-if="payroll.phicemployeededuction">[[convertToPercent(payroll.phicemployeededuction.phicContributionRate.rate)]]%</span>
                        </div>
                    </div>

                    <div class="row py-2">
                        <div class="col">
                            <div class="form-group" v-if="payroll.phicemployeededuction">
                                <label for="">Employee Contribution</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₱</span>
                                    </div>
                                    <input onkeypress="validate()" type="text" class="form-control box-shadow-off" placeholder="Enter EE Contribution" v-model="payroll.phicemployeededuction.ee">
                                </div>
                            </div>
                        </div>

                        <div class="col">
                            <div class="form-group" v-if="payroll.phicemployeededuction">
                                <label for="">Employer Contribution</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₱</span>
                                    </div>
                                    <input onkeypress="validate()" type="text" class="form-control box-shadow-off" placeholder="Enter ER Contribution" v-model="payroll.phicemployeededuction.er">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAGIBIG CONTRIBUTION -->
                <div class="px-4 border mb-2 box-shadow-medium">
                    <div class="row pt-2">
                        <div class="col">
                            <span class="gray font-size-14 font-bold">Pag-Ibig Employee Deduction</span>
                        </div>
                    </div>

                    <div class="row my-2 py-2 order-card b-radius-5">
                        <div class="col-12 pb-2">
                            <label for="" class="gray" v-if="payroll.pagibigemployeededuction">Basis | [[payroll.pagibigemployeededuction.pagibigContributionRate.name]]</label>
                        </div>

                        <div class="col">
                            <label for="" class="gray">Fixed Amount</label><br>
                            <span class="font-bold" v-if="payroll.pagibigemployeededuction">₱[[formatPrice(payroll.pagibigemployeededuction.pagibigContributionRate.rate)]]</span>
                        </div>
                    </div>

                    <div class="row py-2">
                        <div class="col">
                            <div class="form-group" v-if="payroll.pagibigemployeededuction">
                                <label for="">Employee Contribution</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₱</span>
                                    </div>
                                    <input onkeypress="validate()" type="text" class="form-control box-shadow-off" placeholder="Enter EE Contribution" v-model="payroll.pagibigemployeededuction.amount">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- EMPLOYEE TAX DEDUCTION -->
                <div class="px-4 border mb-2 box-shadow-medium">
                    <div class="row pt-2">
                        <div class="col">
                            <span class="gray font-size-14 font-bold">Tax Deduction</span>
                        </div>
                    </div>

                    <div class="row my-2 py-2 order-card b-radius-5">
                        <div class="col-12 pb-2">
                            <label for="" class="gray" v-if="payroll.employeetaxdeduction">Basis | [[payroll.employeetaxdeduction.incometaxtable.name]]</label>
                        </div>

                        <div class="col">
                            <label for="" class="gray">Lower Range</label><br>
                            <span class="font-bold">₱[[formatPrice(payroll.employeetaxdeduction.incometaxtable.lowerLimit)]]</span>
                        </div>

                        <div class="col">
                            <label for="" class="gray">Upper Range</label><br>
                            <span class="font-bold">₱[[formatPrice(payroll.employeetaxdeduction.incometaxtable.upperLimit)]]</span>
                        </div>

                        <div class="col">
                            <label for="" class="gray">Fixed Deduction</label><br>
                            <span class="font-bold">₱[[formatPrice(payroll.employeetaxdeduction.incometaxtable.fixedDeduction)]]</span>
                        </div>
                        
                        <div class="col">
                            <label for="" class="gray">Percent Deduction</label><br>
                            <span class="font-bold">[[convertToPercent(payroll.employeetaxdeduction.incometaxtable.percentDeduction)]]%</span>
                        </div>
                    </div>

                    <div class="row py-2">
                        <div class="col">
                            <div class="form-group" v-if="payroll.employeetaxdeduction">
                                <label for="">Tax Deduction</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₱</span>
                                    </div>
                                    <input onkeypress="validate()" type="text" class="form-control box-shadow-off" placeholder="Enter Tax Contribution" v-model="payroll.employeetaxdeduction.amount">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- De Minimis Benefits -->
                <div class="px-4 border mb-2 box-shadow-medium">
                    <div class="row py-2">
                        <div class="col">
                            <span class="gray font-size-14 font-bold">De Minimis Pay</span>
                        </div>
                    </div>

                    <div class="row py-2">
                        <div class="col-5">
                            <div class="form-group">
                                <label for="">Name</label>
                                <input list="deminimis" type="text" class="form-control" placeholder="Enter De Minimis Pay"  v-for="bonus in payroll.deminimispay" v-model="bonus.name">
                                <datalist id="deminimis">
                                    <option v-for="d in deminimis" :value="d.name">
                                </datalist>

                            </div>
                        </div>

                        <div class="col-5">
                            <div class="form-group">
                                <label for="">Amount</label>
                                <div class="input-group"  v-for="bonus in payroll.deminimispay" >
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₱</span>
                                    </div>
                                    <input type="text" class="form-control box-shadow-off" placeholder="Enter Amount" onkeypress="validate()" v-model="bonus.amount">
                                </div>
                            </div>
                        </div>

                        <div class="col-2">
                            <div class="form-group">
                                <label for="">Taxable</label>
                                <select name="" id="" class="form-control"  v-for="bonus in payroll.deminimispay" v-model="bonus.taxable">
                                    <option value=false>No</option>
                                    <option value=true v-if="bonus.taxable" selected>Yes</option>
                                    <option value=true v-else>Yes</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row pb-2">
                        <div class="col">
                            <button class="btn btn-warning" @click="pushBenefits()">+ Add More Benefits</button>
                            <button class="btn btn-danger" @click="popBenefits()">- Remove Benefit</button>
                        </div>
                    </div>
                </div>

                <div class="px-4 border mb-2 box-shadow-medium">
                    <div class="row py-2">
                        <div class="col">
                            <span class="gray font-size-14 font-bold">Bonus Pay</span>
                        </div>
                    </div>

                    <div class="row py-2">
                        <div class="col">
                            <div class="form-group">
                                <label for="">Name</label>
                                <input type="text" class="form-control" placeholder="Enter Bonus Name" v-for="bonus in payroll.bonuspay" v-model="bonus.name">
                            </div>
                        </div>

                        <div class="col">
                            <div class="form-group">
                                <label for="">Amount</label>
                                <div class="input-group" v-for="bonus in payroll.bonuspay">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">₱</span>
                                    </div>
                                    <input type="text" class="form-control box-shadow-off" onkeypress="validate()" v-model="bonus.amount">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row pb-2">
                        <div class="col">
                            <button class="btn btn-warning" @click="pushBonus()">+ Add More Bonus</button>
                            <button class="btn btn-danger" @click="popBonus()">- Remove Bonus</button>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="sticky-top ml-3 box-shadow-medium border px-3">
                    <div class="row py-2">
                        <div class="col">
                            <label for="" class="gray">Basic Pay</label><br>
                            <span class="font-bold font-size-14">₱[[formatPrice(payroll.basicPay)]]</span>
                        </div>
                    </div>
                    <div class="row pt-4 pb-1">
                        <div class="col">
                            <label for="" class="gray">Gross Pay Before Bonus</label><br>
                            <span class="font-bold font-size-14">₱[[formatPrice(payroll.grossPayBeforeBonus)]]</span>
                        </div>
                    </div>
                    <div class="row pb-4 pt-1">
                        <div class="col">
                            <label for="" class="gray">Gross Pay After Bonus</label><br>
                            <span class="font-bold font-size-14">₱[[formatPrice(payroll.grossPayAfterBonus)]]</span>
                        </div>
                    </div>
                    <div class="row pt-4 pb-1">
                        <div class="col">
                            <label for="" class="gray">Net Pay Before Tax</label><br>
                            <span class="font-bold font-size-14">₱[[formatPrice(payroll.netPayBeforeTaxes)]]</span>
                        </div>
                    </div>
                    <div class="row pb-2 pt-1">
                        <div class="col">
                            <label for="" class="gray">Net Pay After Tax</label><br>
                            <span class="font-bold font-size-14">₱[[formatPrice(payroll.netPayAfterTaxes)]]</span>
                        </div>
                    </div>

                    <div class="row py-2">
                        <div class="col">
                            <button class="btn btn-primary col" @click="submit(payroll.id)">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <pre>[[$data]]</pre>
    </div>
</div>
{% endblock %}

{% block scripts %}

<script>
    var app = new Vue({
        delimiters: ['[[', ']]'],
        el: "#app",

        computed: {
            bh(){
                return Number(this.payroll.bh)
            },
            ot(){
                return Number(this.payroll.ot)
            },
            nd(){
                return Number(this.payroll.nd)
            },
            ndot(){
                return Number(this.payroll.ndot)
            },
            rd(){
                return Number(this.payroll.rd)
            },
            rdot(){
                return Number(this.payroll.rdot)
            },
            rdnd(){
                return Number(this.payroll.rdnd)
            },
            rdndot(){
                return Number(this.payroll.rdndot)
            },
            rh(){
                return Number(this.payroll.rh)
            },
            rhot(){
                return Number(this.payroll.rhot)
            },
            rhnd(){
                return Number(this.payroll.rhnd)
            },
            rhndot(){
                return Number(this.payroll.rhndot)
            },
            sh(){
                return Number(this.payroll.sh)
            },
            shot(){
                return Number(this.payroll.shot)
            },
            shnd(){
                return Number(this.payroll.shnd)
            },
            shndot(){
                return Number(this.payroll.shndot)
            },
            shw(){
                return Number(this.payroll.shw)
            },
            shwot(){
                return Number(this.payroll.shwot)
            },
            shwnd(){
                return Number(this.payroll.shwnd)
            },
            shwndot(){
                return Number(this.payroll.shwndot)
            },
            rhrd(){
                return Number(this.payroll.rhrd)
            },
            rhrdot(){
                return Number(this.payroll.rhrdot)
            },
            rhrdnd(){
                return Number(this.payroll.rhrdnd)
            },
            rhrdndot(){
                return Number(this.payroll.rhrdndot)
            },
            shrd(){
                return Number(this.payroll.shrd)
            },
            shrdot(){
                return Number(this.payroll.shrdot)
            },
            shrdnd(){
                return Number(this.payroll.shrdnd)
            },
            shrdndot(){
                return Number(this.payroll.shrdndot)
            },



            sssemployeededuction(){
                return Number(this.payroll.sssemployeededuction.ee)
            },
            phicemployeededuction(){
                return Number(this.payroll.phicemployeededuction.ee)
            },
            pagibigemployeededuction(){
                return Number(this.payroll.pagibigemployeededuction.amount)
            },
            employeetaxdeduction(){
                return Number(this.payroll.employeetaxdeduction.amount)
            },
            deminimispay(){
                return this.payroll.deminimispay.map(item=> item.taxable?item.amount:0)
            },
            bonuspay(){
                return this.payroll.bonuspay.map(item=>item.amount)
            }
        },

        watch: {
            bh(){
                this.watchers()
            },
            ot(){
                this.watchers()
            },
            ut(){
                this.watchers()
            },
            nd(){
                this.watchers()
            },
            ndot(){
                this.watchers()
            },
            rd(){
                this.watchers()
            },
            rdot(){
                this.watchers()
            },
            rdnd(){
                this.watchers()
            },
            rdndot(){
                this.watchers()
            },
            rh(){
                this.watchers()
            },
            rhot(){
                this.watchers()
            },
            rhnd(){
                this.watchers()
            },
            rhndot(){
                this.watchers()
            },
            sh(){
                this.watchers()
            },
            shot(){
                this.watchers()
            },
            shnd(){
                this.watchers()
            },
            shndot(){
                this.watchers()
            },
            shw(){
                this.watchers()
            },
            shwot(){
                this.watchers()
            },
            shwnd(){
                this.watchers()
            },
            shwndot(){
                this.watchers()
            },
            rhrd(){
                this.watchers()
            },
            rhrdot(){
                this.watchers()
            },
            rhrdnd(){
                this.watchers()
            },
            rhrdndot(){
                this.watchers()
            },
            shrd(){
                this.watchers()
            },
            shrdot(){
                this.watchers()
            },
            shrdnd(){
                this.watchers()
            },
            shrdndot(){
                this.watchers()
            },



            sssemployeededuction(){
                this.watchers()
            },
            phicemployeededuction(){
                this.watchers()
            },
            pagibigemployeededuction(){
                this.watchers()
            },
            employeetaxdeduction(){
                this.watchers()
            },
            deminimispay(){
                this.watchers()
            },
            bonuspay(){
                this.watchers()
            }
        },

        data: {
            config: {
				headers: {
                    "X-CSRFToken": getCookie('csrftoken'),
                }
			},
            deminimis: {

            },
            payroll: {
                user: {
                    first_name: null,
                    last_name: null,
                },
                sssemployeededuction: {
                    ee: 0,
                    er: 0,
                    sssContributionRate: {
                        name: null,
                        upperLimit: null,
                        lowerLimit: null,
                        ee: 0,
                        er: 0,
                    }
                },
                phicemployeededuction: {
                    ee: 0,
                    er: 0,
                    phicContributionRate: {
                        name: null,
                        upperLimit: null,
                        lowerLimit: null,
                        rate: 0,
                    }
                },
                pagibigemployeededuction: {
                    amount: 0,
                    pagibigContributionRate: {
                        name: null,
                        rate: 0,
                    }
                },
                employeetaxdeduction: {
                    amount: 0,
                    incometaxtable: {
                        name: null,
                        lowerLimit: 0,
                        upperLimit: 0,
                        fixedDeduction: 0,
                        percentDeduction: 0,
                    }
                },
                deminimispay: [{
                    id: null,
                    name: null,
                    amount: 0,
                    taxable: null,
                }],
                bonuspay: [{
                    id: null,
                    name: null,
                    amount: 0,
                }],
                year: null,
                dateStart: null,
                dateEnd: null,
                dateGenerated: null,
                dateApproved: null,

                bh: 0,
                ot: 0,
                ut: 0,
                nd: 0,
                ndot: 0,
                rd: 0,
                rdot: 0,
                rdnd: 0,
                rdndot: 0,
                rh: 0,
                rhot: 0,
                rhnd: 0,
                rhndot: 0,
                sh: 0,
                shot: 0,
                shnd: 0,
                shndot: 0,
                shw: 0,
                shwot: 0,
                shwnd: 0,
                shwndot: 0,
                rhrd: 0,
                rhrdot: 0,
                rhrdnd: 0,
                rhrdndot: 0,
                shrd: 0,
                shrdot: 0,
                shrdnd: 0,
                shrdndot: 0,

                bhTotalHours: 0,
                otTotalHours: 0,
                utTotalHours: 0,
                ndTotalHours: 0,
                ndotTotalHours: 0,
                rdTotalHours: 0,
                rdotTotalHours: 0,
                rdndTotalHours: 0,
                rdndotTotalHours: 0,
                rhTotalHours: 0,
                rhotTotalHours: 0,
                rhndTotalHours: 0,
                rhndotTotalHours: 0,
                shTotalHours: 0,
                shotTotalHours: 0,
                shndTotalHours: 0,
                shndotTotalHours: 0,
                shwTotalHours: 0,
                shwotTotalHours: 0,
                shwndTotalHours: 0,
                shwndotTotalHours: 0,
                rhrdTotalHours: 0,
                rhrdotTotalHours: 0,
                rhrdndTotalHours: 0,
                rhrdndotTotalHours: 0,
                shrdTotalHours: 0,
                shrdotTotalHours: 0,
                shrdndTotalHours: 0,
                shrdndotTotalHours: 0,

                basicPay: 0,
                holidayPay: 0,
                grossPayBeforeBonus: 0,
                grossPayAfterBonus: 0,
                netPayBeforeTaxes: 0,
                netPayAfterTaxes: 0,
            }
        },

        methods: {
            watchers(){
                this.payroll.basicPay = this.payroll.bh
                this.payroll.grossPayBeforeBonus = 
                    Number(this.payroll.basicPay) + 
                    Number(this.payroll.ot) +
                    Number(this.payroll.nd) +
                    Number(this.payroll.ndot) +
                    Number(this.payroll.rd) +
                    Number(this.payroll.rdot) +
                    Number(this.payroll.rdnd) +
                    Number(this.payroll.rdndot) +
                    Number(this.payroll.rh) +
                    Number(this.payroll.rhot) +
                    Number(this.payroll.rhnd) +
                    Number(this.payroll.rhndot) +
                    Number(this.payroll.sh) +
                    Number(this.payroll.shot) +
                    Number(this.payroll.shnd) +
                    Number(this.payroll.shndot) +
                    Number(this.payroll.shw) +
                    Number(this.payroll.shwot) +
                    Number(this.payroll.shwnd) +
                    Number(this.payroll.shwndot) +
                    Number(this.payroll.rhrd) +
                    Number(this.payroll.rhrdot) +
                    Number(this.payroll.rhrdnd) +
                    Number(this.payroll.rhrdndot) +
                    Number(this.payroll.shrd) +
                    Number(this.payroll.shrdot) +
                    Number(this.payroll.shrdnd) +
                    Number(this.payroll.shrdndot) +
                    Number(this.payroll.holidayPay)

                this.payroll.grossPayAfterBonus = Number(this.payroll.grossPayBeforeBonus)  
                this.payroll.deminimispay.forEach(item=>{
                    console.log(item)
                    if(item.taxable){
                        this.payroll.grossPayAfterBonus += Number(item.amount)
                    }
                })
                this.payroll.bonuspay.forEach(item=>{
                    this.payroll.grossPayAfterBonus += Number(item.amount)
                })
                this.payroll.netPayBeforeTaxes = 
                    Number(this.payroll.grossPayBeforeBonus) -
                    Number(this.sssemployeededuction) - 
                    Number(this.phicemployeededuction) - 
                    Number(this.pagibigemployeededuction)
                this.payroll.netPayAfterTaxes = 
                    Number(this.payroll.netPayBeforeTaxes) - 
                    Number(this.employeetaxdeduction) +
                    Number(Number(this.payroll.grossPayAfterBonus) - Number(this.payroll.grossPayBeforeBonus))
            },
            formatDate(value){
                const months = [
                    'Jan',
                    'Feb',
                    'Mar',
                    'Apr',
                    'May',
                    'Jun',
                    'Jul',
                    'Aug',
                    'Sep',
                    'Oct',
                    'Nov',
                    'Dec'
                ]

                const days = [
                    'Sun',
                    'Mon',
                    'Tue',
                    'Wed',
                    'Thu',
                    'Fri',
                    'Sat'
                ]

                value = new Date(value)
                year = value.getFullYear()
                month = months[value.getMonth()]
                date = value.getDate()
                day = days[value.getDay()]
                formatted = `${month}. ${date}, ${year}`

                return formatted
            },

            formatPrice(val){
                val = Number(val).toFixed(2)
                var num = val.replace(/,/gi, "");
                var num1 = num.split('.')
                var num2 = num1[0].split(/(?=(?:\d{3})+$)/).join(",");
                val = (num1[1] === undefined ? num2 : num2 + "." + num1[1])
                return val
            },

            convertToPercent(val){
                return (val*100).toFixed(2)
            },

            pushBenefits(){
                this.payroll.deminimispay.push(
                    {
                        id: null,
                        name: null,
                        amount: 0,
                        taxable: false,
                    }
                )
            },
            popBenefits(){
                this.payroll.deminimispay.pop()
            },

            pushBonus(){
                this.payroll.bonuspay.push(
                    {
                        id: null,
                        name: null,
                        amount: 0,
                    }
                )
            },

            popBonus(){
                this.payroll.bonuspay.pop()
            },








            updateBH(event){
                this.payroll.bh = event.target.value.trim()
            },
            updateOT(event){
                this.payroll.ot = event.target.value.trim()
            },
            updateND(event){
                this.payroll.nd = event.target.value.trim()
            },
            updateNDOT(event){
                this.payroll.ndot = event.target.value.trim()
            },
            updateRD(event){
                this.payroll.rd = event.target.value.trim()
            },
            updateRDOT(event){
                this.payroll.rdot = event.target.value.trim()
            },
            updateRDND(event){
                this.payroll.rdnd = event.target.value.trim()
            },
            updateRDNDOT(event){
                this.payroll.rdndot = event.target.value.trim()
            },
            updateRH(event){
                this.payroll.rh = event.target.value.trim()
            },
            updateRHOT(event){
                this.payroll.rhot = event.target.value.trim()
            },
            updateRHND(event){
                this.payroll.rhnd = event.target.value.trim()
            },
            updateRHNDOT(event){
                this.payroll.rhndot = event.target.value.trim()
            },
            updateSH(event){
                this.payroll.sh = event.target.value.trim()
            },
            updateSHOT(event){
                this.payroll.shot = event.target.value.trim()
            },
            updateSHND(event){
                this.payroll.shnd = event.target.value.trim()
            },
            updateSHNDOT(event){
                this.payroll.shndot = event.target.value.trim()
            },
            updateSHW(event){
                this.payroll.shw = event.target.value.trim()
            },
            updateSHWOT(event){
                this.payroll.shwot = event.target.value.trim()
            },
            updateSHWND(event){
                this.payroll.shwnd = event.target.value.trim()
            },
            updateSHWNDOT(event){
                this.payroll.shwndot = event.target.value.trim()
            },

            updateRHRD(event){
                this.payroll.rhrd = event.target.value.trim()
            },
            updateRHRDOT(event){
                this.payroll.rhrdot = event.target.value.trim()
            },
            updateRHRDND(event){
                this.payroll.rhrdnd = event.target.value.trim()
            },
            updateRHRDNDOT(event){
                this.payroll.rhrdndot = event.target.value.trim()
            },

            updateSHRD(event){
                this.payroll.shrd = event.target.value.trim()
            },
            updateSHRDOT(event){
                this.payroll.shrdot = event.target.value.trim()
            },
            updateSHRDND(event){
                this.payroll.shrdnd = event.target.value.trim()
            },
            updateSHRDNDOT(event){
                this.payroll.shrdndot = event.target.value.trim()
            },




            updateBHHOURS(event){
                this.payroll.bhTotalHours = event.target.value.trim()
            },
            updateOTHOURS(event){
                this.payroll.otTotalHours = event.target.value.trim()
            },
            updateNDHOURS(event){
                this.payroll.ndTotalHours = event.target.value.trim()
            },
            updateNDOTHOURS(event){
                this.payroll.ndotTotalHours = event.target.value.trim()
            },

            updateRDHOURS(event){
                this.payroll.rdTotalHours = event.target.value.trim()
            },
            updateRDOTHOURS(event){
                this.payroll.rdotTotalHours = event.target.value.trim()
            },
            updateRDNDHOURS(event){
                this.payroll.rdndTotalHours = event.target.value.trim()
            },
            updateRDNDOTHOURS(event){
                this.payroll.rdndotTotalHours = event.target.value.trim()
            },

            updateRHHOURS(event){
                this.payroll.rhTotalHours = event.target.value.trim()
            },
            updateRHOTHOURS(event){
                this.payroll.rhotTotalHours = event.target.value.trim()
            },
            updateRHNDHOURS(event){
                this.payroll.rhndTotalHours = event.target.value.trim()
            },
            updateRHNDOTHOURS(event){
                this.payroll.rhndotTotalHours = event.target.value.trim()
            },
            updateSHHOURS(event){
                this.payroll.shTotalHours = event.target.value.trim()
            },
            updateSHOTHOURS(event){
                this.payroll.shotTotalHours = event.target.value.trim()
            },
            updateSHNDHOURS(event){
                this.payroll.shndTotalHours = event.target.value.trim()
            },
            updateSHNDOTHOURS(event){
                this.payroll.shndotTotalHours = event.target.value.trim()
            },

            updateSHWHOURS(event){
                this.payroll.shwTotalHours = event.target.value.trim()
            },
            updateSHWOTHOURS(event){
                this.payroll.shwotTotalHours = event.target.value.trim()
            },
            updateSHWNDHOURS(event){
                this.payroll.shwndTotalHours = event.target.value.trim()
            },
            updateSHWNDOTHOURS(event){
                this.payroll.shwndotTotalHours = event.target.value.trim()
            },

            updateRHRDHOURS(event){
                this.payroll.rhrdTotalHours = event.target.value.trim()
            },
            updateRHRDOTHOURS(event){
                this.payroll.rhrdotTotalHours = event.target.value.trim()
            },
            updateRHRDNDHOURS(event){
                this.payroll.rhrdndTotalHours = event.target.value.trim()
            },
            updateRHRDNDOTHOURS(event){
                this.payroll.rhrdndotTotalHours = event.target.value.trim()
            },

            updateSHRDHOURS(event){
                this.payroll.shrdTotalHours = event.target.value.trim()
            },
            updateSHRDOTHOURS(event){
                this.payroll.shrdotTotalHours = event.target.value.trim()
            },
            updateSHRDNDHOURS(event){
                this.payroll.shrdndTotalHours = event.target.value.trim()
            },
            updateSHRDNDOTHOURS(event){
                this.payroll.shrdndotTotalHours = event.target.value.trim()
            },






            submit(id){
                
                Swal.fire({
                    confirmButtonText: 'I am sure.',
                    showCancelButton: true,
                    title: 'Save Payroll?',
                    icon: 'warning',
                    html: 'Are you sure you want to save this payroll?',
                })
                .then(result=>{
                    if(result.isConfirmed){
                        Swal.fire({
                            showConfirmButton: false,
                            allowOutsideClick: false,
                            html: `<div class="spinner-grow text-warning" role="status"></div> <div class="spinner-grow text-warning delay-1" role="status"></div> <div class="spinner-grow text-warning delay-2" role="status"></div> <br><br> <span class="font-bold font-size-18">Saving Payroll . . .</span> <br> <span class="font-size-12 gray font-medium">Press F12 to check if something went wrong.</span>`
                        })
                        axios.put(`/ems-edit-payroll-save/${id}/`, this.payroll, this.config)
                        .then(res=>{
                            res.data==0?location.href=`/ems-payroll/?year=${this.payroll.year}&period=semi&dateRange=${this.payroll.dateStart}%20${this.payroll.dateEnd}`:''
                        })
                    }
                })
            }
        },

        mounted(){
            let params = new URLSearchParams(location.search)
            axios.get(`/api/payroll/${params.get('payroll_id')}`)
            .then(res=>{
                console.log(res.data)
                this.payroll=res.data
            })
            .catch(err=>{
                Swal.fire({
                    title: "Something went wrong.",
                    html: err.message,
                    icon: "error"
                })
            })

            axios.get('/api/deminimis/')
            .then(res=>this.deminimis = res.data)
        }
    })
</script>

{% endblock %}